# 订阅主题<a name="zh-cn_topic_0043961402"></a>

## 操作场景<a name="section32629212144827"></a>

要接收发布至主题的消息，您必须向该主题添加订阅者。

## 添加订阅<a name="section66233919201117"></a>

1.  登录管理控制台。
2.  在管理控制台左上角单击![](figures/icon-region.png)图标，选择区域和项目。
3.  选择“应用服务” \> “消息通知服务”。

    进入消息通知服务页面。

4.  在左侧导航栏，选择“主题管理” \> “主题”。

    进入主题页面。

5.  在主题列表中，选择您要向其添加订阅者的主题，在右侧“操作”栏单击“添加订阅”。

    此时将显示“添加订阅”对话框。

6.  在“协议”下拉框中选择您需要的协议，在“订阅终端”输入框中输入对应的订阅终端，批量添加时，每个终端地址占一行，最多可输入10个终端。
    -   选择邮件协议

        订阅终端输入有效邮箱地址，如：username@example.com。

        被添加的邮箱地址会收到由系统发送的“订阅请求”邮件，48小时内有效。确认订阅请求后，该邮箱地址可收到通过该主题发布的所有消息。

    -   选择HTTP/HTTPS协议

        订阅终端请输入公网网址（如：http://example.com/notification/action ），需要确认订阅。关于HTTP\(S\)消息的格式，请参见[HTTP\(S\)终端节点使用样例简介](HTTP(S)终端节点使用样例简介.md)。

    -   选择短信协议

        订阅终端输入有效手机号码，输入规则为\[+\] \[国家码\]\[手机号码\]。国内手机号码可省略\[+\]或\[+\] \[国家码\]。例如：+8600000000000。

        被添加的手机号码会收到由系统发送的“订阅请求”短信，48小时内有效。确认订阅请求后，该手机号码可收到通过该主题发布的所有消息。

    -   选择FunctionGraph（函数）协议

        订阅终端是一个函数，无需确认订阅。单击输入框右侧的![](figures/icon-plus.png)选择订阅终端，在“版本”的下拉框中选择可用版本。关于创建函数，请参见具体操作《函数工作流用户指南》中的[函数管理](https://support.huaweicloud.com/usermanual-functiongraph/functiongraph_01_0320.html)。

    -   选择DMS协议

        订阅终端是消息队列，无需确认订阅。单击输入框右侧的![](figures/icon-plus.png)选择订阅终端。选择DMS队列时，需要在队列策略中给SMN服务授权“ProduceMessages”权限。具体操作请参考《分布式消息服务用户指南》中的[策略管理](https://support.huaweicloud.com/usermanual-dms/dms-ug-0312109.html)。

    -   选择应用协议

        订阅终端是平台应用的终端，无需确认订阅。

        您可在平台应用的应用详情中获取终端的URN，在输入框中输入终端URN。或者您在平台应用的应用详情的“终端”区域，选中要添加的终端URN，单击“订阅终端到主题”，再在弹出框中单击输入框右侧的![](figures/icon-plus.png)选择主题，也可为主题添加订阅。

7.  单击“确定”。

    新增订阅将显示在页面下方的订阅列表中。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >-   为了防止恶意攻击订阅终端，我们会对订阅终端进行流控保护，触发流控规则后，消息通知服务不再发送订阅确认消息，具体的保护规则请参见《消息通知服务用户指南》的附录“订阅确认流控说明”部分。  
    >-   消息通知服务不会校验订阅终端是否真实存在。  
    >-   订阅确认的链接在48小时内有效。  


